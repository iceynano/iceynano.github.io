(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{423:function(t,a,s){"use strict";s.r(a);var e=s(10),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_6-1-gui-option-gui选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-gui-option-gui选项"}},[t._v("#")]),t._v(" 6.1. GUI Option GUI选项")]),t._v(" "),a("p",[t._v("这里介绍 Alas 的 GUI 的设置生成，以及如何在代码中使用它们。修改 Alas 的选项不需要具备前端知识，因为 GUI 中的选项是靠 json 生成的。")]),t._v(" "),a("p",[t._v("下面的文件均在 module/config 中，为了防止路径过长，会省略 module/config。")]),t._v(" "),a("h2",{attrs:{id:"选项生成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项生成"}},[t._v("#")]),t._v(" 选项生成")]),t._v(" "),a("p",[t._v("GUI 中选项储存在 argument/args.json 中，它有 3 个层级。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("任务（task）")]),t._v("，每个任务可以包含多个选项组。")]),t._v(" "),a("li",[a("strong",[t._v("选项组（group）")]),t._v("，每个选项选项组可以包含选项。")]),t._v(" "),a("li",[a("strong",[t._v("选项（argument）")]),t._v("，每个选项会有以下属性：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性名")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",[t._v("类型")])]),t._v(" "),a("tr",[a("td",[t._v("value")]),t._v(" "),a("td",[t._v("值")])]),t._v(" "),a("tr",[a("td",[t._v("option")]),t._v(" "),a("td",[t._v("（可选）下拉菜单列表中的元素")])]),t._v(" "),a("tr",[a("td",[t._v("validate")]),t._v(" "),a("td",[t._v("（可选）校验类型，比如时间格式的校验")])])])]),t._v(" "),a("p",[t._v("args.json 是由 config_updater.py 生成的，每次修改选项后，都应该运行 config_updater.py 来生成，而不是手动修改 args.json。")]),t._v(" "),a("p",[t._v("需要开发者手动编写的有：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("task.yaml")]),t._v("，定义每个任务所包含的选项组")]),t._v(" "),a("li",[a("strong",[t._v("argument.yaml")]),t._v("，定义每个选项组包含的选项，以及每个选项的属性")]),t._v(" "),a("li",[a("strong",[t._v("override.yaml")]),t._v("，覆盖某些特殊选项的值，比如硬编码服务器刷新时间")]),t._v(" "),a("li",[a("strong",[t._v("gui.yaml")]),t._v("，定义 GUI 上会出现的其他文本")])]),t._v(" "),a("p",[t._v("由 config_updater.py 自动生成的文件有：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("args.json")]),t._v("，用于生成 GUI")]),t._v(" "),a("li",[a("strong",[t._v("menu.json")]),t._v("，生成 GUI 侧边栏的任务卡组")]),t._v(" "),a("li",[a("strong",[t._v("config_generated.py")]),t._v("，提供 IDE 的代码自动提示")]),t._v(" "),a("li",[a("strong",[t._v("template.json")]),t._v("，默认用户设置")]),t._v(" "),a("li",[a("strong",[t._v("i18n/{lang}.json")]),t._v("，翻译文件")])]),t._v(" "),a("p",[t._v("完整生成流程以 config_updater.py 末尾的注释为准。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("                 task.yaml -+----------------\x3e menu.json\n             argument.yaml -+-> args.json ---\x3e config_generated.py\n             override.yaml -+       |\n                  gui.yaml --------\\|\n                                   ||\n    (old) i18n/<lang>.json --------\\\\========> i18n/<lang>.json\n    (old)    template.json ---------\\========> template.json\n")])])]),a("h2",{attrs:{id:"新增选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增选项"}},[t._v("#")]),t._v(" 新增选项")]),t._v(" "),a("p",[t._v("假设我们需要新增一个选项："),a("em",[t._v("每天购买 X 个指挥喵")]),t._v("，它位于 "),a("em",[t._v("指挥喵")]),t._v(" 任务中的 "),a("em",[t._v("指挥喵")]),t._v(" 选项组中。")]),t._v(" "),a("p",[t._v("在 argument/argument.yaml 中定义选项组 "),a("em",[t._v("指挥喵（Meowfficer）")]),t._v(" 和选项 "),a("em",[t._v("每天购买 X 个指挥喵（BuyAmount）")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Meowfficer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BuyAmount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" input\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("p",[t._v("在这里填写的值（value）将成为选项默认值。")]),t._v(" "),a("h4",{attrs:{id:"选项定义的简写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项定义的简写"}},[t._v("#")]),t._v(" 选项定义的简写")]),t._v(" "),a("p",[t._v("你也可以只填写默认值，这是非常方便的：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Meowfficer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BuyAmount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("p",[t._v("经过 config_updater.py 生成，将得到：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Meowfficer"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"BuyAmount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("config_updater.py 将会根据默认值的数据类型生成 "),a("em",[t._v("选项类型（type）")]),t._v("，生成规则如下，实际以 "),a("code",[t._v("data_to_type()")]),t._v(" 函数为准：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("选项")]),t._v(" "),a("th",[t._v("type")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("默认值为 bool")]),t._v(" "),a("td",[t._v("checkbox")])]),t._v(" "),a("tr",[a("td",[t._v("选项的定义含有 "),a("em",[t._v("options")]),t._v(" 属性")]),t._v(" "),a("td",[t._v("select")])]),t._v(" "),a("tr",[a("td",[t._v("选项名称包含 "),a("code",[t._v("Filter")])]),t._v(" "),a("td",[t._v("textarea")])]),t._v(" "),a("tr",[a("td",[t._v("其余全部")]),t._v(" "),a("td",[t._v("input")])])])]),t._v(" "),a("h4",{attrs:{id:"覆盖自动生成的属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#覆盖自动生成的属性"}},[t._v("#")]),t._v(" 覆盖自动生成的属性")]),t._v(" "),a("p",[t._v("另外，手动填写的属性会优先于自动生成的属性。比如按照上面的定义，选项 "),a("em",[t._v("每天购买 X 个指挥喵（BuyAmount）")]),t._v(" 的 "),a("em",[t._v("选项类型（type）")]),t._v(" 应该是 "),a("code",[t._v("input")]),t._v("，你但也可以强行指定 "),a("em",[t._v("type")]),t._v(" 为 "),a("code",[t._v("textarea")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Meowfficer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BuyAmount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" textarea\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("h4",{attrs:{id:"传递特殊属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传递特殊属性"}},[t._v("#")]),t._v(" 传递特殊属性")]),t._v(" "),a("p",[t._v("除了 type、value、option、validate 这几个基本属性外，你还可以定义其他属性：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Meowfficer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("BuyAmount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("something_special")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("p",[t._v("其他属性会被复制到 args.json 中：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Meowfficer"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"BuyAmount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"something_special"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"新增任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增任务"}},[t._v("#")]),t._v(" 新增任务")]),t._v(" "),a("p",[t._v("假设我们需要新增一个任务："),a("em",[t._v("指挥喵（Meowfficer）")])]),t._v(" "),a("p",[t._v("在 argument/task.yaml 中定义任务所包含的选项组，一个任务应当包含 "),a("em",[t._v("调度器设置（Scheduler）")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Meowfficer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Scheduler\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Meowfficer\n")])])]),a("h4",{attrs:{id:"任务调度优先级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#任务调度优先级"}},[t._v("#")]),t._v(" 任务调度优先级")]),t._v(" "),a("p",[t._v("修改 config_manual.py 中的 "),a("code",[t._v("SCHEDULER_PRIORITY")]),t._v(" 值，将 Meowfficer 插入其中。")]),t._v(" "),a("p",[t._v("SCHEDULER_PRIORITY 是一个过滤器，用大于号 "),a("code",[t._v(">")]),t._v(" 连接任务，靠前的任务会先被调度器执行。基本的任务排序规则是：重启 > 收菜类 > 每日收获类 > 每日出击类 > 正常出击类 > 纯消磨时间类。为防止用户盲目地把自己想运行的任务放到前面，导致收菜类任务被延迟，SCHEDULER_PRIORITY 不会暴露到 GUI 中，需要开发者手动编写。")]),t._v(" "),a("h4",{attrs:{id:"运行任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行任务"}},[t._v("#")]),t._v(" 运行任务")]),t._v(" "),a("p",[t._v("在根目录下的 alas.py AzurLaneAutoScript 类中添加任务的函数")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("meowfficer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meowfficer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meowfficer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" RewardMeowfficer\n    RewardMeowfficer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" device"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"覆盖选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#覆盖选项"}},[t._v("#")]),t._v(" 覆盖选项")]),t._v(" "),a("p",[t._v("在 argument/override.yaml 中覆盖一些选项，比如硬编码任务 "),a("em",[t._v("大舰队（Guild）")]),t._v(" 的服务器刷新时间。")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Guild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Scheduler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SuccessInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FailureInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ServerUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("00:00")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("06:00")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("12:00")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("18:00")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("21:00")]),t._v("\n")])])]),a("p",[t._v("选项被覆盖后，不会出现在 GUI 中。")]),t._v(" "),a("h2",{attrs:{id:"调用选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调用选项"}},[t._v("#")]),t._v(" 调用选项")]),t._v(" "),a("p",[t._v("在 argument/argument.yaml 中定义的选项，会以 "),a("code",[t._v("{group}_{argument}")]),t._v(" 的格式生成于 config_generated.py 中。")]),t._v(" "),a("p",[t._v("Alas 会绑定 config_generated.py 中的变量与用户设置中的值，例如在任务 "),a("em",[t._v("指挥喵（Meowfficer）")]),t._v(" 中，根据 task.yaml 中的定义，绑定了选项组 "),a("em",[t._v("调度器设置（Scheduler）")]),t._v(" 和  "),a("em",[t._v("指挥喵（Meowfficer）")]),t._v("。这个绑定是双向的和自动的。")]),t._v(" "),a("h4",{attrs:{id:"访问用户设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问用户设置"}},[t._v("#")]),t._v(" 访问用户设置")]),t._v(" "),a("p",[t._v("访问刚刚添加的选项 "),a("em",[t._v("每天购买 X 个指挥喵（BuyAmount）")]),t._v(" ：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Meowfficer_BuyAmount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1")]),t._v("\n")])])]),a("p",[t._v("修改这个变量的值，Alas 也会同步修改用户配置中的值：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Meowfficer_BuyAmount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("INFO     23:54:29.501 │ Save config ./config\\alas.json,                     \n         Meowfficer.Meowfficer.Meowfficer_BuyAmount=15\n")])])]),a("p",[t._v("如果要修改多个变量，应该使用 "),a("code",[t._v("multi_set()")]),t._v("，这只会触发一次文件保存：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("multi_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Meowfficer_BuyAmount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\n    self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Meowfficer_FortChoreMeowfficer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("INFO     23:57:15.458 │ Save config ./config\\alas.json,                     \n         Meowfficer.Meowfficer.BuyAmount=15,\n         Meowfficer.Meowfficer.FortChoreMeowfficer=True\n")])])]),a("h4",{attrs:{id:"访问未绑定的用户设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问未绑定的用户设置"}},[t._v("#")]),t._v(" 访问未绑定的用户设置")]),t._v(" "),a("p",[t._v("一般来说，一个任务只需要访问它下属的选项组，不需要访问其他任务的选项。")]),t._v(" "),a("p",[t._v("比如任务 "),a("em",[t._v("指挥喵（Meowfficer）")]),t._v(" 中并未包含选项组 "),a("em",[t._v("出击设置（Campaign）")]),t._v("，访问这些选项得到的将是默认值，修改它也不会同步到用户设置中。")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Campaign_Name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 7-2")]),t._v("\n")])])]),a("p",[t._v("但如果确实有需要，比如大世界，可以通过 "),a("code",[t._v("self.config.data")]),t._v(" 访问完整的用户设置。")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" datetime "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" datetime\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" deep_get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deep_set\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取任务 隐秘海域(OpsiObscure) 的下一次运行时间")]),t._v("\nvalue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deep_get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" keys"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OpsiObscure.Scheduler.NextRun'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" default"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("datetime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改任务 隐秘海域(OpsiObscure) 的下一次运行时间")]),t._v("\nself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("modified"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OpsiObscure.Scheduler.NextRun'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datetime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 保存")]),t._v("\nself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"覆盖用户设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#覆盖用户设置"}},[t._v("#")]),t._v(" 覆盖用户设置")]),t._v(" "),a("p",[t._v("强制地并在当前任务下永久地覆盖某些设置，但不会写入用户设置中")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("override"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    Submarine_Fleet"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Submarine_Mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'every_combat'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("临时地覆盖某些用户设置")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("backup = self.config.temporary(Campaign_UseAutoSearch=True)\n")])])]),a("p",[t._v("然后回退")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("backup.recover()\n")])])]),a("h2",{attrs:{id:"增加翻译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#增加翻译"}},[t._v("#")]),t._v(" 增加翻译")]),t._v(" "),a("p",[t._v("在 i18n/{lang}.json 下是翻译文件，每个任务、选项组和选项都会有名称（name）和帮助（help）两个属性。未添加翻译的条目默认是选项的路径。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('"Meowfficer": {\n    "BuyAmount": {\n        "name": "Meowfficer.BuyAmount.name",\n        "help": "Meowfficer.BuyAmount.help"\n    }\n}\n')])])]),a("p",[t._v("你可以在 GUI 的侧边栏 - 开发 - 翻译 处修改它。")]),t._v(" "),a("p",[t._v("注意：Alas 没有专人负责翻译，所以谁添加了选项，谁就负责全语言的翻译。")]),t._v(" "),a("h4",{attrs:{id:"更好地命名选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更好地命名选项"}},[t._v("#")]),t._v(" 更好地命名选项")]),t._v(" "),a("p",[t._v("Alas 希望选项翻译更接近自然语言，使得选项名称和选项值连起来能成为一个完整句子，比如这里是 "),a("em",[t._v("每天购买 X 个指挥喵")]),t._v(" 而不是 "),a("em",[t._v("猫箱购买数量：X")]),t._v("。这似乎有些怪怪的，但 "),a("em",[t._v("每月 X 号后，不再开启新的大舰队作战")]),t._v(" 会比 "),a("em",[t._v("大舰队作战开启阈值：X")]),t._v(" 更容易理解。")])])}),[],!1,null,null,null);a.default=n.exports}}]);