<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2.1. Debug 调试 | Alas Wiki</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="下一代游戏脚本">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.def407d0.css" as="style"><link rel="preload" href="/assets/js/app.78daa96c.js" as="script"><link rel="preload" href="/assets/js/2.af7fb78a.js" as="script"><link rel="preload" href="/assets/js/1.592cd0e6.js" as="script"><link rel="preload" href="/assets/js/35.02543194.js" as="script"><link rel="prefetch" href="/assets/js/10.ebf63330.js"><link rel="prefetch" href="/assets/js/11.9cba1676.js"><link rel="prefetch" href="/assets/js/12.43ccf4d1.js"><link rel="prefetch" href="/assets/js/13.b645a106.js"><link rel="prefetch" href="/assets/js/14.13e65bfb.js"><link rel="prefetch" href="/assets/js/15.3645b6ab.js"><link rel="prefetch" href="/assets/js/16.9e372e07.js"><link rel="prefetch" href="/assets/js/17.6357ee0e.js"><link rel="prefetch" href="/assets/js/18.a56add02.js"><link rel="prefetch" href="/assets/js/19.4613b0e4.js"><link rel="prefetch" href="/assets/js/20.3a45d050.js"><link rel="prefetch" href="/assets/js/21.b4491ec8.js"><link rel="prefetch" href="/assets/js/22.cfb93602.js"><link rel="prefetch" href="/assets/js/23.4e633445.js"><link rel="prefetch" href="/assets/js/24.ee46bcea.js"><link rel="prefetch" href="/assets/js/25.5277074d.js"><link rel="prefetch" href="/assets/js/26.814211c4.js"><link rel="prefetch" href="/assets/js/27.77947e8a.js"><link rel="prefetch" href="/assets/js/28.3c2ae803.js"><link rel="prefetch" href="/assets/js/29.8feb7215.js"><link rel="prefetch" href="/assets/js/3.c9cdf263.js"><link rel="prefetch" href="/assets/js/30.1dbca0e1.js"><link rel="prefetch" href="/assets/js/31.62fe9090.js"><link rel="prefetch" href="/assets/js/32.ffbcbbd8.js"><link rel="prefetch" href="/assets/js/33.419fa715.js"><link rel="prefetch" href="/assets/js/34.be138503.js"><link rel="prefetch" href="/assets/js/36.d34ca2d4.js"><link rel="prefetch" href="/assets/js/37.4caf7cbd.js"><link rel="prefetch" href="/assets/js/38.a96e4d9c.js"><link rel="prefetch" href="/assets/js/39.03826fec.js"><link rel="prefetch" href="/assets/js/4.baa974b4.js"><link rel="prefetch" href="/assets/js/40.5a5e0ce9.js"><link rel="prefetch" href="/assets/js/41.4f6a0496.js"><link rel="prefetch" href="/assets/js/42.6183f45f.js"><link rel="prefetch" href="/assets/js/43.efdb1d6c.js"><link rel="prefetch" href="/assets/js/44.08309fa8.js"><link rel="prefetch" href="/assets/js/45.cd150b46.js"><link rel="prefetch" href="/assets/js/46.ddffbb5c.js"><link rel="prefetch" href="/assets/js/47.0e259247.js"><link rel="prefetch" href="/assets/js/48.fdf2013b.js"><link rel="prefetch" href="/assets/js/49.9e5ab69e.js"><link rel="prefetch" href="/assets/js/5.596c3c4c.js"><link rel="prefetch" href="/assets/js/50.d300a10a.js"><link rel="prefetch" href="/assets/js/51.fc74317d.js"><link rel="prefetch" href="/assets/js/52.5032b379.js"><link rel="prefetch" href="/assets/js/53.09200c6c.js"><link rel="prefetch" href="/assets/js/54.60201a5a.js"><link rel="prefetch" href="/assets/js/55.d97fffca.js"><link rel="prefetch" href="/assets/js/56.9085dd2f.js"><link rel="prefetch" href="/assets/js/57.9f3d6151.js"><link rel="prefetch" href="/assets/js/58.c79528e6.js"><link rel="prefetch" href="/assets/js/59.c09675e8.js"><link rel="prefetch" href="/assets/js/6.6e945098.js"><link rel="prefetch" href="/assets/js/60.1e35e4ea.js"><link rel="prefetch" href="/assets/js/61.0e154a78.js"><link rel="prefetch" href="/assets/js/62.3c6d2a1e.js"><link rel="prefetch" href="/assets/js/63.b657ee9e.js"><link rel="prefetch" href="/assets/js/64.0e5b9088.js"><link rel="prefetch" href="/assets/js/7.150b3b85.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.9fd01095.js">
    <link rel="stylesheet" href="/assets/css/0.styles.def407d0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><!----> <span class="site-name">Alas Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/zh/dev/Perspective.html" class="nav-link">
  开发
</a></div><div class="nav-item"><a href="https://alas.azurlane.cloud/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官方网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://alas.azurlane.cloud/demo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线示例
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/LmeSzinc/AzurLaneAutoScript/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github 页面
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/dev/2.1-Debugging.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/zh/dev/Perspective.html" class="nav-link">
  开发
</a></div><div class="nav-item"><a href="https://alas.azurlane.cloud/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官方网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://alas.azurlane.cloud/demo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线示例
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/LmeSzinc/AzurLaneAutoScript/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github 页面
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/dev/2.1-Debugging.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>开发</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/dev/Perspective.html" class="sidebar-link">海图识别</a></li><li><a href="/zh/dev/1-Start.html" class="sidebar-link">1. Start 开始</a></li><li><a href="/zh/dev/2.1-Debugging.html" aria-current="page" class="active sidebar-link">2.1. Debug 调试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/dev/2.1-Debugging.html#调试一个-button" class="sidebar-link">调试一个 Button</a></li><li class="sidebar-sub-header"><a href="/zh/dev/2.1-Debugging.html#调试其他服务器" class="sidebar-link">调试其他服务器</a></li><li class="sidebar-sub-header"><a href="/zh/dev/2.1-Debugging.html#调试一个识别函数" class="sidebar-link">调试一个识别函数</a></li><li class="sidebar-sub-header"><a href="/zh/dev/2.1-Debugging.html#调试一个方法" class="sidebar-link">调试一个方法</a></li><li class="sidebar-sub-header"><a href="/zh/dev/2.1-Debugging.html#在编写模块时-为测试提供方便" class="sidebar-link">在编写模块时，为测试提供方便</a></li><li class="sidebar-sub-header"><a href="/zh/dev/2.1-Debugging.html#调试海图识别" class="sidebar-link">调试海图识别</a></li></ul></li><li><a href="/zh/dev/2.2-Multi server support.html" class="sidebar-link">2.2. Multi-server support 多服务器支持</a></li><li><a href="/zh/dev/3.1-Utils.html" class="sidebar-link">3.1. Utils 工具</a></li><li><a href="/zh/dev/3.2-Decorators.html" class="sidebar-link">3.2. Decorators 装饰器</a></li><li><a href="/zh/dev/3.3-Log.html" class="sidebar-link">3.3. Log 日志</a></li><li><a href="/zh/dev/3.4-Exception.html" class="sidebar-link">3.4. Exception 异常</a></li><li><a href="/zh/dev/4.1-Detection objects.html" class="sidebar-link">4.1. Detection objects 识别类</a></li><li><a href="/zh/dev/4.2-UI control.html" class="sidebar-link">4.2. UI control UI控制</a></li><li><a href="/zh/dev/4.3-OCR.html" class="sidebar-link">4.3. OCR 文字识别</a></li><li><a href="/zh/dev/5.1-Local Map.html" class="sidebar-link">5.1. Local Map 地图处理</a></li><li><a href="/zh/dev/5.2-Create globe Map.html" class="sidebar-link">5.2. Create global Map 构造全局地图</a></li><li><a href="/zh/dev/5.3-Globe Map.html" class="sidebar-link">5.3. Global Map 全局地图</a></li><li><a href="/zh/dev/6.1-GUI Option.html" class="sidebar-link">6.1. GUI Option GUI选项</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2-1-debug-调试"><a href="#_2-1-debug-调试" class="header-anchor">#</a> 2.1. Debug 调试</h1> <p>Alas 的入口文件有两个：调度器 <code>alas.py</code> 和网页后端 <code>gui.py</code>。由于很多游戏玩法会消耗游戏帐号上的大量资源，或者消耗大量时间，甚至一些内容一天只能操作一次，调试的时候不能像平时使用一样执行完整流程。大多数时候调试都是脱离游戏，根据一张或者几张游戏截图进行的。为此，Alas 所有的模块都是可以独立运行的，不依赖 GUI 也不依赖用户配置。</p> <h2 id="调试一个-button"><a href="#调试一个-button" class="header-anchor">#</a> 调试一个 Button</h2> <p>假设 Alas 无法识别 SOS 模块中的 <code>SIGNAL_LIST_CHECK</code>。</p> <img src="data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP+X/BvJ88igUi7vhwAAAABJRU5ErkJggg==" alt="SIGNAL_LIST_CHECK" height="360"> <p>那么你需要将游戏切换到 SOS 信号列表的界面，截图（使用模拟器的截图功能即可）。</p> <img src="/assets/img/Screenshot_20210626-154639.d6c02afc.png" alt="Screenshot_20210626-154639" height="360"> <p>在 <code>module/sos/sos.py</code> 文件的末尾添加这些并运行：</p> <blockquote><p>当然，你也可以新建一个文件，导入 SOS 模块和相关 assets，并在 <code>if __name__ == '__main__':</code> 下运行，这会更加严谨。不加 <code>if __name__ == '__main__':</code> 问题不大，因为 Alas 是单进程单线程的。</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code>az <span class="token operator">=</span> CampaignSos<span class="token punctuation">(</span><span class="token string">'alas'</span><span class="token punctuation">,</span> task<span class="token operator">=</span><span class="token string">'Sos'</span><span class="token punctuation">)</span>
az<span class="token punctuation">.</span>image_file <span class="token operator">=</span> <span class="token string">r'xxxxx.png'</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>az<span class="token punctuation">.</span>appear<span class="token punctuation">(</span>SIGNAL_LIST_CHECK<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>INFO | +---------------------------------------------+
INFO | |                    START                    |
INFO | +---------------------------------------------+
INFO | [Server] cn
read: ./config\alas.json
read: ./module/config/argument/args.json
INFO | Bind task Sos
INFO | &lt;&lt;&lt; DEVICE &gt;&gt;&gt;
INFO | [Adb_binary] adb.exe
INFO | already connected to 127.0.0.1:59865
newCommandTimeout updated to 168h0m0s
True
</code></pre></div><p>结果是 True，识别没有问题。同时调试过程中产生的 log 会单独保存，比如直接运行 test.py，log 将保存至 <code>log/2021-11-06_test.log</code>。</p> <p>逐句讲解。</p> <h3 id="az-campaignsos-alas-task-sos"><a href="#az-campaignsos-alas-task-sos" class="header-anchor">#</a> az = CampaignSos('alas', task='Sos')</h3> <p>创建 <code>CampaignSos</code> 对象。Alas 模块都继承自 <code>ModuleBase</code> 类，这是 <code>ModuleBase</code> 的定义。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> config<span class="token punctuation">,</span> device<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> task<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
</code></pre></div><ul><li><strong>config</strong>，用户配置名称，对应 <code>config/{config}.json</code>。也可以使用 <code>template</code>。</li> <li><strong>device</strong>，Device 对象，一般不需要输入，会根据 config 自动创建。</li> <li><strong>task</strong>，任务名称。对应任务的用户设置将绑定到变量上。一般来说，可以绑定为 <code>Alas</code>，也就是用户界面中的 “Alas 设置”，包含模拟器Serial，游戏包名等。</li></ul> <h3 id="az-image-file-r-xxxxx-png"><a href="#az-image-file-r-xxxxx-png" class="header-anchor">#</a> az.image_file = r'xxxxx.png'</h3> <p>读取本地文件，存入 Alas 的截图缓存中，免去从模拟器截图。简单粗暴却又实用，这是它的定义。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token decorator annotation punctuation">@property</span>
<span class="token keyword">def</span> <span class="token function">image_file</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> self<span class="token punctuation">.</span>_image_file

<span class="token decorator annotation punctuation">@image_file<span class="token punctuation">.</span>setter</span>
<span class="token keyword">def</span> <span class="token function">image_file</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    For development.
    Load image from local file system and set it to self.device.image
    Test an image without taking a screenshot from emulator.
    &quot;&quot;&quot;</span>
    <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> np<span class="token punctuation">.</span>ndarray<span class="token punctuation">)</span><span class="token punctuation">:</span>
        value <span class="token operator">=</span> Image<span class="token punctuation">.</span>fromarray<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token keyword">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        value <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span>convert<span class="token punctuation">(</span><span class="token string">'RGB'</span><span class="token punctuation">)</span>

    self<span class="token punctuation">.</span>device<span class="token punctuation">.</span>image <span class="token operator">=</span> value
</code></pre></div><h2 id="调试其他服务器"><a href="#调试其他服务器" class="header-anchor">#</a> 调试其他服务器</h2> <p>在导入任何 Alas 内容之前，切换服务器。</p> <div class="language- extra-class"><pre class="language-text"><code>import module.config.server as server
server.server = 'en'
</code></pre></div><h2 id="调试一个识别函数"><a href="#调试一个识别函数" class="header-anchor">#</a> 调试一个识别函数</h2> <p>假设我们正在重构剧情选项的识别，收集到了不同选项数量的图片，希望测试 <code>_story_option_buttons()</code> 是否都能正确识别。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> module<span class="token punctuation">.</span>statistics<span class="token punctuation">.</span>utils <span class="token keyword">import</span> load_folder
<span class="token keyword">from</span> module<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>info_handler <span class="token keyword">import</span> InfoHandler

<span class="token comment"># 存放截图的目录</span>
folder <span class="token operator">=</span> <span class="token string">r'xxxxx'</span>
az <span class="token operator">=</span> InfoHandler<span class="token punctuation">(</span><span class="token string">'alas'</span><span class="token punctuation">,</span> task<span class="token operator">=</span><span class="token string">'Alas'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> load_folder<span class="token punctuation">(</span>folder<span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    az<span class="token punctuation">.</span>image_file <span class="token operator">=</span> <span class="token builtin">file</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>az<span class="token punctuation">.</span>_story_option_buttons<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>[STORY_OPTION_1_OF_2, STORY_OPTION_2_OF_2]
[STORY_OPTION_1_OF_2, STORY_OPTION_2_OF_2]
[STORY_OPTION_1_OF_2, STORY_OPTION_2_OF_2]
[STORY_OPTION_1_OF_1]
[STORY_OPTION_1_OF_1]
</code></pre></div><h2 id="调试一个方法"><a href="#调试一个方法" class="header-anchor">#</a> 调试一个方法</h2> <p>假设你想了解 Alas 的章节切换是如何工作的。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> module<span class="token punctuation">.</span>campaign<span class="token punctuation">.</span>campaign_ui <span class="token keyword">import</span> CampaignUI

<span class="token comment"># 在运行之前，需要手动将游戏切换至主线章节界面。</span>
az <span class="token operator">=</span> CampaignUI<span class="token punctuation">(</span><span class="token string">'alas'</span><span class="token punctuation">,</span> task<span class="token operator">=</span><span class="token string">'Alas'</span><span class="token punctuation">)</span>
<span class="token comment"># 出于优化目的，Alas 许多方法会复用上一张截图，因此需要先截一张图。</span>
az<span class="token punctuation">.</span>device<span class="token punctuation">.</span>screenshot<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 切换至第 7 章。</span>
az<span class="token punctuation">.</span>campaign_ensure_chapter<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">)</span>
</code></pre></div><p>与大多数脚本需要先切换至第一章对齐，再切换至需要的章节不同，<code>campaign_ensure_chapter</code> 是基于 OCR 的，不会有多余的操作。你也可以故意搞事，比如手动点击反方向，观察 Alas 是如何纠错的。</p> <h2 id="在编写模块时-为测试提供方便"><a href="#在编写模块时-为测试提供方便" class="header-anchor">#</a> 在编写模块时，为测试提供方便</h2> <p>Alas 所有的模块都是可以独立运行的，不依赖 GUI 也不依赖用户配置，每个模块通常只有一个方法是依赖用户配置的，这一点在开发新模块的时候尤其需要注意。</p> <p>以委托模块（<code>module.commission</code>）为例。在 <code>commission.py</code> 中，只有 <code>run()</code> 方法是给调度器使用的，其他方法例如收委托（<code>commission_receive</code>）和派委托（<code>commission_start</code>）都可以直接调用。不会因为某个选项没有开启，导致测试内容被跳过。</p> <p>一些方法也会提供两份。例如，大世界中的 <code>fleet_repair</code> 必然会将舰队移动至港口并维修。<code>handle_port_repair</code> 则会根据用户配置和当前舰队的血量决定是否进行维修。</p> <h2 id="调试海图识别"><a href="#调试海图识别" class="header-anchor">#</a> 调试海图识别</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image

<span class="token keyword">from</span> module<span class="token punctuation">.</span>config<span class="token punctuation">.</span>config <span class="token keyword">import</span> AzurLaneConfig
<span class="token keyword">from</span> module<span class="token punctuation">.</span>map_detection<span class="token punctuation">.</span>view <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token comment"># 截图文件</span>
<span class="token builtin">file</span> <span class="token operator">=</span> <span class="token string">r'xxxxx'</span>

<span class="token keyword">class</span> <span class="token class-name">Config</span><span class="token punctuation">:</span>
    <span class="token comment"># 把地图文件中的 Config 粘贴到这里</span>
    <span class="token keyword">pass</span>

md <span class="token operator">=</span> View<span class="token punctuation">(</span>AzurLaneConfig<span class="token punctuation">(</span><span class="token string">'template'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>merge<span class="token punctuation">(</span>Config<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
image <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">.</span>convert<span class="token punctuation">(</span><span class="token string">'RGB'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 如果 log 里有 homo_storage 的值，可以在这里载入。</span>
<span class="token comment"># sto = (...)</span>
<span class="token comment"># md.backend.load_homography(storage=sto)</span>

md<span class="token punctuation">.</span>load<span class="token punctuation">(</span>image<span class="token punctuation">)</span>
md<span class="token punctuation">.</span>predict<span class="token punctuation">(</span><span class="token punctuation">)</span>
md<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
md<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>draw<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zh/dev/1-Start.html" class="prev">
        1. Start 开始
      </a></span> <span class="next"><a href="/zh/dev/2.2-Multi server support.html">
        2.2. Multi-server support 多服务器支持
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.78daa96c.js" defer></script><script src="/assets/js/2.af7fb78a.js" defer></script><script src="/assets/js/1.592cd0e6.js" defer></script><script src="/assets/js/35.02543194.js" defer></script>
  </body>
</html>
