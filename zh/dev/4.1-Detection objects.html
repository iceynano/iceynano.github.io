<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4.1. Detection objects 识别类 | Alas Wiki</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="下一代游戏脚本">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.def407d0.css" as="style"><link rel="preload" href="/assets/js/app.78daa96c.js" as="script"><link rel="preload" href="/assets/js/2.af7fb78a.js" as="script"><link rel="preload" href="/assets/js/1.592cd0e6.js" as="script"><link rel="preload" href="/assets/js/19.4613b0e4.js" as="script"><link rel="prefetch" href="/assets/js/10.ebf63330.js"><link rel="prefetch" href="/assets/js/11.9cba1676.js"><link rel="prefetch" href="/assets/js/12.43ccf4d1.js"><link rel="prefetch" href="/assets/js/13.b645a106.js"><link rel="prefetch" href="/assets/js/14.13e65bfb.js"><link rel="prefetch" href="/assets/js/15.3645b6ab.js"><link rel="prefetch" href="/assets/js/16.9e372e07.js"><link rel="prefetch" href="/assets/js/17.6357ee0e.js"><link rel="prefetch" href="/assets/js/18.a56add02.js"><link rel="prefetch" href="/assets/js/20.3a45d050.js"><link rel="prefetch" href="/assets/js/21.b4491ec8.js"><link rel="prefetch" href="/assets/js/22.cfb93602.js"><link rel="prefetch" href="/assets/js/23.4e633445.js"><link rel="prefetch" href="/assets/js/24.ee46bcea.js"><link rel="prefetch" href="/assets/js/25.5277074d.js"><link rel="prefetch" href="/assets/js/26.814211c4.js"><link rel="prefetch" href="/assets/js/27.77947e8a.js"><link rel="prefetch" href="/assets/js/28.3c2ae803.js"><link rel="prefetch" href="/assets/js/29.8feb7215.js"><link rel="prefetch" href="/assets/js/3.c9cdf263.js"><link rel="prefetch" href="/assets/js/30.1dbca0e1.js"><link rel="prefetch" href="/assets/js/31.62fe9090.js"><link rel="prefetch" href="/assets/js/32.ffbcbbd8.js"><link rel="prefetch" href="/assets/js/33.419fa715.js"><link rel="prefetch" href="/assets/js/34.be138503.js"><link rel="prefetch" href="/assets/js/35.02543194.js"><link rel="prefetch" href="/assets/js/36.d34ca2d4.js"><link rel="prefetch" href="/assets/js/37.4caf7cbd.js"><link rel="prefetch" href="/assets/js/38.a96e4d9c.js"><link rel="prefetch" href="/assets/js/39.03826fec.js"><link rel="prefetch" href="/assets/js/4.baa974b4.js"><link rel="prefetch" href="/assets/js/40.5a5e0ce9.js"><link rel="prefetch" href="/assets/js/41.4f6a0496.js"><link rel="prefetch" href="/assets/js/42.6183f45f.js"><link rel="prefetch" href="/assets/js/43.efdb1d6c.js"><link rel="prefetch" href="/assets/js/44.08309fa8.js"><link rel="prefetch" href="/assets/js/45.cd150b46.js"><link rel="prefetch" href="/assets/js/46.ddffbb5c.js"><link rel="prefetch" href="/assets/js/47.0e259247.js"><link rel="prefetch" href="/assets/js/48.fdf2013b.js"><link rel="prefetch" href="/assets/js/49.9e5ab69e.js"><link rel="prefetch" href="/assets/js/5.596c3c4c.js"><link rel="prefetch" href="/assets/js/50.d300a10a.js"><link rel="prefetch" href="/assets/js/51.fc74317d.js"><link rel="prefetch" href="/assets/js/52.5032b379.js"><link rel="prefetch" href="/assets/js/53.09200c6c.js"><link rel="prefetch" href="/assets/js/54.60201a5a.js"><link rel="prefetch" href="/assets/js/55.d97fffca.js"><link rel="prefetch" href="/assets/js/56.9085dd2f.js"><link rel="prefetch" href="/assets/js/57.9f3d6151.js"><link rel="prefetch" href="/assets/js/58.c79528e6.js"><link rel="prefetch" href="/assets/js/59.c09675e8.js"><link rel="prefetch" href="/assets/js/6.6e945098.js"><link rel="prefetch" href="/assets/js/60.1e35e4ea.js"><link rel="prefetch" href="/assets/js/61.0e154a78.js"><link rel="prefetch" href="/assets/js/62.3c6d2a1e.js"><link rel="prefetch" href="/assets/js/63.b657ee9e.js"><link rel="prefetch" href="/assets/js/64.0e5b9088.js"><link rel="prefetch" href="/assets/js/7.150b3b85.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.9fd01095.js">
    <link rel="stylesheet" href="/assets/css/0.styles.def407d0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><!----> <span class="site-name">Alas Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/zh/dev/Perspective.html" class="nav-link">
  开发
</a></div><div class="nav-item"><a href="https://alas.azurlane.cloud/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官方网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://alas.azurlane.cloud/demo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线示例
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/LmeSzinc/AzurLaneAutoScript/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github 页面
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/dev/4.1-Detection objects.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/zh/dev/Perspective.html" class="nav-link">
  开发
</a></div><div class="nav-item"><a href="https://alas.azurlane.cloud/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官方网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://alas.azurlane.cloud/demo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线示例
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/LmeSzinc/AzurLaneAutoScript/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github 页面
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/dev/4.1-Detection objects.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>开发</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/dev/Perspective.html" class="sidebar-link">海图识别</a></li><li><a href="/zh/dev/1-Start.html" class="sidebar-link">1. Start 开始</a></li><li><a href="/zh/dev/2.1-Debugging.html" class="sidebar-link">2.1. Debug 调试</a></li><li><a href="/zh/dev/2.2-Multi server support.html" class="sidebar-link">2.2. Multi-server support 多服务器支持</a></li><li><a href="/zh/dev/3.1-Utils.html" class="sidebar-link">3.1. Utils 工具</a></li><li><a href="/zh/dev/3.2-Decorators.html" class="sidebar-link">3.2. Decorators 装饰器</a></li><li><a href="/zh/dev/3.3-Log.html" class="sidebar-link">3.3. Log 日志</a></li><li><a href="/zh/dev/3.4-Exception.html" class="sidebar-link">3.4. Exception 异常</a></li><li><a href="/zh/dev/4.1-Detection objects.html" class="active sidebar-link">4.1. Detection objects 识别类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/dev/4.1-Detection objects.html#button" class="sidebar-link">Button</a></li><li class="sidebar-sub-header"><a href="/zh/dev/4.1-Detection objects.html#添加一个-button" class="sidebar-link">添加一个 Button</a></li><li class="sidebar-sub-header"><a href="/zh/dev/4.1-Detection objects.html#buttongrid" class="sidebar-link">ButtonGrid</a></li><li class="sidebar-sub-header"><a href="/zh/dev/4.1-Detection objects.html#buttongrid-buttons-self" class="sidebar-link">ButtonGrid.buttons(self)</a></li><li class="sidebar-sub-header"><a href="/zh/dev/4.1-Detection objects.html#button-getitem-self-item" class="sidebar-link">Button._getitem_(self, item)</a></li><li class="sidebar-sub-header"><a href="/zh/dev/4.1-Detection objects.html#template" class="sidebar-link">Template</a></li><li class="sidebar-sub-header"><a href="/zh/dev/4.1-Detection objects.html#添加用于敌人识别的模板图片" class="sidebar-link">添加用于敌人识别的模板图片</a></li><li class="sidebar-sub-header"><a href="/zh/dev/4.1-Detection objects.html#添加识别动态敌人的-gif-模板图片" class="sidebar-link">添加识别动态敌人的 GIF 模板图片</a></li><li class="sidebar-sub-header"><a href="/zh/dev/4.1-Detection objects.html#游戏内容识别" class="sidebar-link">游戏内容识别</a></li></ul></li><li><a href="/zh/dev/4.2-UI control.html" class="sidebar-link">4.2. UI control UI控制</a></li><li><a href="/zh/dev/4.3-OCR.html" class="sidebar-link">4.3. OCR 文字识别</a></li><li><a href="/zh/dev/5.1-Local Map.html" class="sidebar-link">5.1. Local Map 地图处理</a></li><li><a href="/zh/dev/5.2-Create globe Map.html" class="sidebar-link">5.2. Create global Map 构造全局地图</a></li><li><a href="/zh/dev/5.3-Globe Map.html" class="sidebar-link">5.3. Global Map 全局地图</a></li><li><a href="/zh/dev/6.1-GUI Option.html" class="sidebar-link">6.1. GUI Option GUI选项</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_4-1-detection-objects-识别类"><a href="#_4-1-detection-objects-识别类" class="header-anchor">#</a> 4.1. Detection objects 识别类</h1> <p>这里介绍 Alas 中用于识别的类。</p> <h2 id="button"><a href="#button" class="header-anchor">#</a> Button</h2> <p>在 Alas 中，用于识别的图片称为 Assets，经过 button_extract 提取后，得到 Button 对象。</p> <h3 id="button-appear-on-self-image-threshold-10"><a href="#button-appear-on-self-image-threshold-10" class="header-anchor">#</a> Button.appear_on(self, image, threshold=10)</h3> <p>判断在图片上是否出现当前 button，使用平均颜色识别。</p> <h3 id="button-match-self-image-offset-30-threshold-0-85"><a href="#button-match-self-image-offset-30-threshold-0-85" class="header-anchor">#</a> Button.match(self, image, offset=30, threshold=0.85)</h3> <p>判断在图片上是否出现当前 button，使用模板匹配识别。offset 表示搜索的范围，为整数时上下搜索，为 tuple 时在四周搜索。匹配成功后会设置 <code>_button_offset</code>，表示识别的区域相对原始区域的偏移，将影响未来的点击区域。</p> <p>首次调用时，会重新读取 assets 文件并缓存。</p> <h3 id="button-button"><a href="#button-button" class="header-anchor">#</a> Button.button</h3> <p>产生一个在点击区域内的随机点。原始的点击区域加上 <code>_button_offset</code> 得到当前的点击范围。碧蓝航线曾经有过 <code>确认</code> 和 <code>取消</code> 按钮的上下抖动，<code>_button_offset</code> 可以自动处理这个问题。</p> <h3 id="button-load-color-self-image"><a href="#button-load-color-self-image" class="header-anchor">#</a> Button.load_color(self, image)</h3> <p>重新从截图中载入 button 的颜色和图像。只在伏击空袭的识别中使用。</p> <h2 id="添加一个-button"><a href="#添加一个-button" class="header-anchor">#</a> 添加一个 Button</h2> <p>Button 对象按模块保存于 ./asset 目录下，按钮定义于每个模块的 asset.py 文件中。比如 BATTLE_PREPARATION 的 Assets 图片是这样的：</p> <img src="/assets/img/BATTLE_PREPARATION.ddca5ea2.png" alt="BATTLE_PREPARATION" height="360"> <p>在 assets.py 中，它是这样的：</p> <div class="language- extra-class"><pre class="language-text"><code>BATTLE_PREPARATION = Button(area=(1043, 607, 1241, 667), color=(234, 179, 97), button=(1043, 607, 1241, 667), file='./assets/combat/BATTLE_PREPARATION.png')
</code></pre></div><p>area 是识别的区域，color 是平均颜色，button 是出现后的点击区域，file 是 assets 文件的位置。</p> <p>注意，所有的 asset.py 都是由 button_extract 生成的，不要手动去修改它。</p> <p>假设我们希望添加一个 <code>确定</code> 按钮，它出现于潜艇信号扫描时。</p> <ol><li><p><strong>截图</strong>，使用模拟器自带的截图工具截图，并保证分辨率是 1280x720</p> <img src="/assets/img/screenshot.c306421e.png" alt="screenshot" height="360"></li> <li><p><strong>将图片复制到 ./asset 下相应的目录中</strong>，更改文件名，比如 <code>SEARCH_CONFIRM.png</code></p></li> <li><p><strong>拖动至 Photoshop 中打开</strong></p> <p>下面以 Photoshop CS6 为例。当然，你也可以使用别的软件来进行下面的操作，能把剩下的区域涂黑就行。使用 PS 只是因为它有录制动作的功能，会更快一些。</p></li> <li><p><strong>使用选区工具框选按钮区域</strong></p></li> <li><p><strong>播放动作</strong></p></li></ol> <p>直接点击 <code>播放动作</code> 的按钮，自动执行图片处理的操作。处理完的图片是这样的：</p> <img src="data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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" alt="screenshot_result" height="360"> <p>在第一次操作时，需要按照以下步骤添加动作。</p> <p>在菜单栏的 <code>窗口</code> 中，点击 <code>动作</code> ，弹出动作窗口。</p> <p>在添加动作之前，最好备份当前图片，因为接下来需要记录的操作是不可逆的。</p> <ul><li>在动作窗口中，点击新建动作的图标，按照自己的喜好命名，比如 <code>button_image</code>。点击 <code>记录</code> ，注意灰色的圆圈变红了，这表示动作录制开始了。</li> <li>在图片区域单击鼠标右键，点击 <code>选择反向</code> 。</li> <li>在菜单栏的 <code>编辑</code> 中，点击 <code>填充</code> 。</li> <li>在弹出的填充选项窗口中，填充内容使用 <code>黑色</code>，填充模式选择 <code>正常</code>，不透明度选择 <code>100</code>，点击 <code>确定</code>。</li> <li>在菜单栏的 <code>文件</code> 中，点击 <code>保存</code>。</li> <li>在菜单栏的 <code>文件</code> 中，点击 <code>关闭。</code></li> <li>在动作窗口中，单击停止录制的图标，此时动作录制停止。</li></ul> <p>录制完成后，会得到动作如下，以后就可以直接使用，不需要手动操作了。</p> <img src="data:image/png;base64,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" alt="ps_action"> <ol><li><p><strong>(可选) 添加属性覆盖图片</strong></p> <p>一个按钮具有三个属性：</p> <ul><li>area，按钮识别的区域。</li> <li>color，按钮的颜色。</li> <li>button，按钮出现后的点击区域。</li></ul> <p>假如添在同一目录下放置图片文件 <code>SEARCH_CONFIRM.BUTTON.png</code> ，并按照刚才描述的方法处理图片。那么这张图片的 <code>button</code> 属性将覆盖  <code>SEARCH_CONFIRM.png</code> 的 <code>button</code> 属性。</p> <p>这是一个非常有用的特性，因为脚本通常需要判断截图中出现的元素，然后点击按钮，需要判断的地方和需要点击的地方可能不出于同一位置。</p></li> <li><p><strong>运行 button_extract</strong></p> <div class="language- extra-class"><pre class="language-text"><code>python -m dev_tools.button_extract
</code></pre></div></li></ol> <h2 id="buttongrid"><a href="#buttongrid" class="header-anchor">#</a> ButtonGrid</h2> <p>生成 Button 的二维阵列。</p> <img src="/assets/img/ButtonGrid.f2072add.png" alt="ButtonGrid" height="360"> <p><code>origin</code> 是最左上角 button 的坐标，<code>delta</code> 是每个 button 移动的距离，<code>button_shape</code> 是每个 button 的大小，<code>grid_shape</code> 是网格的大小。</p> <h2 id="buttongrid-buttons-self"><a href="#buttongrid-buttons-self" class="header-anchor">#</a> ButtonGrid.buttons(self)</h2> <p>将网格展平为 list。</p> <h2 id="button-getitem-self-item"><a href="#button-getitem-self-item" class="header-anchor">#</a> Button.<strong>getitem</strong>(self, item)</h2> <p>获取某个位置的 Button。</p> <h2 id="template"><a href="#template" class="header-anchor">#</a> Template</h2> <p>模板图片。Template 需要以 <code>TEMPLATE_</code> 开头，不需要像处理 Button 一样处理，直接裁切即可，但同样需要运行 button_extract。首次调用时，会重新读取 assets 文件并缓存。</p> <p>Template 可以是 GIF 图片，GIF 中的每一帧都会用于匹配。</p> <h3 id="template-match-self-image-similarity-0-85"><a href="#template-match-self-image-similarity-0-85" class="header-anchor">#</a> Template.match(self, image, similarity=0.85)</h3> <p>模板匹配。</p> <h3 id="template-match-result-self-image"><a href="#template-match-result-self-image" class="header-anchor">#</a> Template.match_result(self, image)</h3> <p>模板匹配。返回相似度和最相似点。</p> <h3 id="template-match-multi-self-image-similarity-0-85"><a href="#template-match-multi-self-image-similarity-0-85" class="header-anchor">#</a> Template.match_multi(self, image, similarity=0.85)</h3> <p>多点模板匹配，自动合并相邻的点。返回一个 list 的 Button 对象。</p> <h2 id="添加用于敌人识别的模板图片"><a href="#添加用于敌人识别的模板图片" class="header-anchor">#</a> 添加用于敌人识别的模板图片</h2> <p>首先，我们不能直接裁切截图来制作模板图片，因为地图中的物体是有透视的，而模板匹配是对图片的缩放敏感的。我们需要使用 <code>dev_tools/relative_crop.py</code> 来获取图片。其中的 <code>get_relative_image</code> 可以根据透视裁剪出相对位置的图片，并放大到固定的大小。</p> <p>下图展示了 <code>self.get_relative_image((-1, -1, 1, 0), output_shape=(120, 60))</code> 的裁切区域。</p> <img src="/assets/img/relative_crop.a7364dd6.png" alt="relative_crop"> <ol><li><p><strong>编辑 ./dev_tools/relative_crop.py，粘贴地图文件中的设置</strong></p> <div class="language- extra-class"><pre class="language-text"><code>class Config:
    &quot;&quot;&quot;
    Paste the config of map file here
    &quot;&quot;&quot;
    pass
</code></pre></div></li> <li><p><strong>修改保存目录和截图文件路径</strong></p> <div class="language- extra-class"><pre class="language-text"><code># Folder to save temp images
folder = './screenshots/temp/'
# Put Screenshot here
file = './screenshots/TEMPLATE_AMBUSH_EVADE_FAILED.png'
</code></pre></div></li> <li><p><strong>运行 relative_crop</strong></p> <div class="language- extra-class"><pre class="language-text"><code>python -m dev_tools.relative_crop
</code></pre></div></li> <li><p>在保存目录里找到对应格子的图片，在图片中裁切出需要的模板。将模板图片放置于 <code>assets/&lt;server&gt;/template</code> 目录下，文件名需以 <code>TEMPLATE_</code> 开头。</p></li> <li><p><strong>运行 button_extract</strong></p></li></ol> <h2 id="添加识别动态敌人的-gif-模板图片"><a href="#添加识别动态敌人的-gif-模板图片" class="header-anchor">#</a> 添加识别动态敌人的 GIF 模板图片</h2> <p>在活动永夜幻光（event_20200723_cn）中，游戏里的精英敌人身上会覆盖一层动态的黑色烟雾，影响常规模板匹配，因此添加了对 GIF 模板的支持。原理是先大量截图并裁切，再去重，将剩下的图片储存为 GIF，用 GIF 中的帧当作多个模板去匹配一个敌人。即便没有黑雾，使用多模板匹配，也能提高识别正确率。</p> <ol><li><p><strong>进入关卡，找到精英敌人</strong> 可能需要反复进入撤退来刷出特定的精英。</p></li> <li><p><strong>编辑 ./dev_tools/relative_record.py，粘贴地图文件中的设置</strong></p> <div class="language- extra-class"><pre class="language-text"><code>class Config:
    &quot;&quot;&quot;
    Paste the config of map file here
    &quot;&quot;&quot;
    pass
</code></pre></div></li> <li><p><strong>修改设置</strong></p> <p>NODE 是当前视角下的格子，不是在整个地图中的格子。</p> <div class="language- extra-class"><pre class="language-text"><code>Arguments:
    CONFIG:     ini config file to load.
    FOLDER:     Folder to save.
    NAME:       Siren name, images will save in &lt;FOLDER&gt;/&lt;NAME&gt;
    NODE:       Node in local map view, that you are going to crop.
</code></pre></div></li> <li><p><strong>运行 ./dev_tools/relative_record.py</strong></p> <p>这会执行 300 次截图，然后使用 <code>get_relative_image</code> 函数裁切出特定格子中的塞壬图像。得到第一张截图时，会弹出裁切的预览，需要人工确认是否裁切到了正确的格子。如果裁到别的格子上，要停止运行，修改 NODE，再重新运行。</p></li> <li><p><strong>运行 ./dev_tools/relative_record_gif.py</strong></p> <p>暴力搜索帧数最少的 gif 模板，生成在 <code>{FOLDER}/{NAME}_gif</code> 。然后手动挑选帧数较少且能反应主要特征的 gif。如果有符合要求的，跳转至第 9 步，否则继续第 6 步，改用人工优化。</p></li> <li><p><strong>观察精英敌人</strong></p> <p>用 PhotoShop 打开 <code>&lt;FOLDER&gt;/&lt;NAME&gt;</code> 文件夹下的第一张图片，在游戏中观察精英敌人的上下呼吸运动。通常小人的身体是上下运动的，四肢是旋转的。模板匹配对缩放和旋转的识别很差，所以需要找到小人身上的不旋转的区域来裁切出模板，这个区域称为 AREA。AREA 选择时的一些经验：</p> <ul><li>不要选择小人的面部（容易误判）或眼睛（小人会眨眼睛）。</li> <li>不要包含小人身后的海面（海面颜色会变化）。</li> <li>AREA 的长宽都应大于 15 像素（减少误判）。</li> <li>可以接受部分图像是旋转的。</li></ul> <p>例如在塞壬航母的中，选择了身体作为模板。（左：300 张截图中的前 30 张，右：提取的 GIF 模板）</p> <p><img src="/assets/img/relative_record.3f89163d.gif" alt="relative_record" height="360"><img src="data:image/gif;base64,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" alt="TEMPLATE_SIREN_CV" height="360"></p></li> <li><p><strong>编辑 ./dev_tools/relative_record_gif.py，修改设置</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Arguments:
    FOLDER:     Save folder from relative_record.
    NAME:       Siren name from relative_record.
                Save gif file to &lt;FOLDER&gt;/TEMPLATE_SIREN_&lt;NAME&gt;.gif
    AREA:       Area to crop, such as (32, 32, 54, 52).
                Choose an area where things don't rotate too much.
    THRESHOLD:  If the similarity between a template and existing
                templates greater than THRESHOLD,
                this template will be dropped.
                Threshold in real detection is 0.85, for higher
                accuracy, threshold here should higher than 0.85.
</code></pre></div><p>FOLDER 和 NAME 从 relative_crop 中导入，一般不需要修改。AREA 是刚才观察得到的裁切区域。THRESHOLD 是去重时的相似度，实际匹配的相似度是 0.85，去重时的相似度应该高一些，以提高识别率。</p></li> <li><p><strong>运行 ./dev_tools/relative_record_gif.py</strong> 运行时会打印哪一张截图产生了新的模板，在 300 张截图中得到的模板数量应小于 5。产生的模板数量越少越好，过多的模板会拖慢识别速度，也意味着裁切区域不对。此时需要重复第 5 步至第 7 步，人工优化 AREA。</p></li> <li><p><strong>使用新的模板</strong> 将新的 GIF 模板复制到 <code>./assets/&lt;server&gt;/template</code> 文件夹中，然后运行 button_extract。在地图文件的设置中开启塞壬识别，并设置模板名称。</p> <div class="language- extra-class"><pre class="language-text"><code>MAP_HAS_SIREN = True
MAP_SIREN_TEMPLATE = ['U101', 'U73', 'U552']
</code></pre></div><p><code>U101</code> 是第 3 步中的 NAME，表示使用 <code>TEMPLATE_U101.gif</code> 或 <code>TEMPLATE_U101.png</code>。它是大小写敏感的，如果在运行时找不到模板文件，会提示 <code>Enemy detection template not found: {name}</code>。</p></li></ol> <h2 id="游戏内容识别"><a href="#游戏内容识别" class="header-anchor">#</a> 游戏内容识别</h2> <h3 id="self-appear-self-button-offset-0-interval-0-threshold-none"><a href="#self-appear-self-button-offset-0-interval-0-threshold-none" class="header-anchor">#</a> self.appear(self, button, offset=0, interval=0, threshold=None)</h3> <p>判断 button 是否出现在画面中</p> <ul><li><p><strong>offset</strong></p> <p>button 的偏移量。假设 <code>button.area=(100, 200, 300, 400)</code>，<code>offset=(30, 20)</code>，那么 Alas 将在 <code>(100-30, 200-20, 300+30, 400+30)</code> 的区域内搜索按钮。</p> <p>offset=None 时，使用平均颜色识别（<code>Button.appear_on()</code>）</p> <p>设置 offset 后，使用模板匹配识别（<code>Template.match()</code>）</p></li> <li><p><strong>interval</strong></p> <p>按钮出现间隔。按钮出现后的若干秒内，对这个按钮的识别返回 False。一般设置 2 或 3 秒，能避免连击。</p></li></ul> <h3 id="self-appear-then-click"><a href="#self-appear-then-click" class="header-anchor">#</a> self.appear_then_click()</h3> <p>判断 button 是否出现在画面中，出现了就点击。</p> <p><code>appear_then_click()</code> 的本质是：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">if</span> self<span class="token punctuation">.</span>appear<span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">:</span>
    self<span class="token punctuation">.</span>device<span class="token punctuation">.</span>click<span class="token punctuation">(</span>button<span class="token punctuation">)</span>
</code></pre></div><p>它们的连续调用会带来一个非常方便的特性：在设置了 offset 的情况下，即便游戏内的按钮相对 asset 图片有所移动，Alas 也能点击被移动后的按钮。这会降低 assets 维护成本，避免把时间浪费在应对游戏 UI 的微调上。它的原理是，上面已经提到过的 <code>Button.match()</code> 在匹配成功时会设置 <code>_button_offset</code>，而 <code>self.device.click()</code> 也会使用 <code>_button_offset</code>。</p> <h3 id="image-color-count-self-button-color-threshold-221-count-50"><a href="#image-color-count-self-button-color-threshold-221-count-50" class="header-anchor">#</a> image_color_count(self, button, color, threshold=221, count=50)</h3> <p>判断颜色相似的像素的个数。有时候土办法会意外地好用。</p> <h3 id="其他方法"><a href="#其他方法" class="header-anchor">#</a> 其他方法</h3> <div class="language- extra-class"><pre class="language-text"><code>wait_until_appear()
wait_until_appear_then_click()
wait_until_disappear()
wait_until_stable()
</code></pre></div><p>已经较少使用。</p> <p>注意：不要把 <code>wait_until_stable()</code> 当作 <code>sleep()</code> 使用，建议优化逻辑以减少对等待的依赖。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/zh/dev/3.4-Exception.html" class="prev">
        3.4. Exception 异常
      </a></span> <span class="next"><a href="/zh/dev/4.2-UI control.html">
        4.2. UI control UI控制
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.78daa96c.js" defer></script><script src="/assets/js/2.af7fb78a.js" defer></script><script src="/assets/js/1.592cd0e6.js" defer></script><script src="/assets/js/19.4613b0e4.js" defer></script>
  </body>
</html>
